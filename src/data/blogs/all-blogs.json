{
  "generated_at": "2026-01-05T05:09:59.489Z",
  "count": 2,
  "entries": [
    {
      "id": "mlos-automation-architecture",
      "title": "Inside MLOS: How We Automated the Entire Release, Test, and Publish Pipeline",
      "date": "2026-01-05",
      "author": {
        "name": "MLOS Core Team",
        "github": "mlOS-foundation",
        "role": "Core Development Team"
      },
      "category": "architecture",
      "featured": true,
      "badge": "ARCHITECTURE",
      "summary": "A comprehensive look at how MLOS automates its release pipeline across private and public repositories, including kernel module builds, E2E testing, and website publishing—all triggered by a single release event.",
      "reading_time": "15 min read",
      "content": "# Inside MLOS: The Fully Automated Release Pipeline\n\n## The Challenge\n\nMLOS is a complex system spanning multiple repositories with different visibility requirements:\n\n- **Private repos** contain proprietary source code and kernel patches\n- **Public repos** distribute binaries, documentation, and test reports\n- **Kernel modules** must match Core versions exactly\n- **E2E tests** validate every release across 32+ ML models\n- **Website** must stay in sync with latest releases\n\nManaging all this manually would be error-prone and time-consuming. Instead, we built a fully automated pipeline where **a single release event triggers everything**.\n\n---\n\n## Architecture Overview\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                        MLOS AUTOMATION ARCHITECTURE                         │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│   PRIVATE REPOS                         PUBLIC REPOS                        │\n│   ────────────                          ────────────                        │\n│                                                                             │\n│   ┌─────────────┐                      ┌──────────────────┐                │\n│   │    core     │─────────────────────▶│  core-releases   │                │\n│   │  (source)   │   sync-to-public     │   (binaries)     │                │\n│   └──────┬──────┘                      └────────┬─────────┘                │\n│          │                                      │                          │\n│          │ on: release                          │                          │\n│          ▼                                      ▼                          │\n│   ┌─────────────┐                      ┌──────────────────┐                │\n│   │    axon     │                      │ mlos-linux-kernel│                │\n│   │ (ML layer)  │                      │ (kernel modules) │                │\n│   └──────┬──────┘                      └────────┬─────────┘                │\n│          │                                      │                          │\n│          │ downloads                            │ downloads                │\n│          ▼                                      ▼                          │\n│   ┌─────────────┐                      ┌──────────────────┐                │\n│   │ system-test │─────────────────────▶│  GitHub Pages    │                │\n│   │  (E2E)      │   render-report      │  (test reports)  │                │\n│   └─────────────┘                      └──────────────────┘                │\n│                                                                             │\n│                         ┌──────────────────┐                               │\n│                         │ mlosfoundation   │                               │\n│                         │     .org         │                               │\n│                         │   (website)      │                               │\n│                         └──────────────────┘                               │\n│                                  ▲                                         │\n│                                  │                                         │\n│                    news-sync, blog-sync, release-sync                      │\n│                                                                             │\n└─────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## The Release Flow\n\nWhen a developer creates a release in the private `core` repo, a cascade of automated workflows begins:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                           RELEASE FLOW SEQUENCE                            │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  1. PUBLISH ARTIFACTS                                                      │\n│     ─────────────────                                                      │\n│     ┌──────────┐                                                           │\n│     │ Developer│                                                           │\n│     │ creates  │                                                           │\n│     │ release  │                                                           │\n│     └────┬─────┘                                                           │\n│          │                                                                 │\n│          ▼                                                                 │\n│     ┌─────────────────────────────────────────────────────────────┐       │\n│     │                  publish-artifacts.yml                       │       │\n│     │  ┌─────────────────────────────────────────────────────┐    │       │\n│     │  │ Build Matrix (4 platforms in parallel):             │    │       │\n│     │  │  • linux-amd64  (gcc)                               │    │       │\n│     │  │  • linux-arm64  (aarch64-linux-gnu-gcc)             │    │       │\n│     │  │  • darwin-amd64 (clang -arch x86_64)                │    │       │\n│     │  │  • darwin-arm64 (clang -arch arm64)                 │    │       │\n│     │  └─────────────────────────────────────────────────────┘    │       │\n│     │                          │                                   │       │\n│     │                          ▼                                   │       │\n│     │  ┌─────────────────────────────────────────────────────┐    │       │\n│     │  │ Dependencies bundled:                               │    │       │\n│     │  │  • ONNX Runtime 1.18.0                              │    │       │\n│     │  │  • llama.cpp (GGUF support)                         │    │       │\n│     │  │  • libtorch (PyTorch runtime)                       │    │       │\n│     │  └─────────────────────────────────────────────────────┘    │       │\n│     │                          │                                   │       │\n│     │                          ▼                                   │       │\n│     │  ┌─────────────────────────────────────────────────────┐    │       │\n│     │  │ Outputs:                                            │    │       │\n│     │  │  • mlos-core_{version}_{platform}.tar.gz            │    │       │\n│     │  │  • mlos-core_{version}_amd64.deb                    │    │       │\n│     │  │  • SHA256 checksums                                 │    │       │\n│     │  │  • GPG signatures (optional)                        │    │       │\n│     │  └─────────────────────────────────────────────────────┘    │       │\n│     └─────────────────────────────────────────────────────────────┘       │\n│                                                                            │\n│  2. SYNC TO PUBLIC                                                         │\n│     ───────────────                                                        │\n│          │                                                                 │\n│          │ on: release [published]                                         │\n│          ▼                                                                 │\n│     ┌─────────────────────────────────────────────────────────────┐       │\n│     │                   sync-to-public.yml                         │       │\n│     │                                                              │       │\n│     │  • Download artifacts from private release                   │       │\n│     │  • Filter: Only binaries (.tar.gz, .deb, .sha256)           │       │\n│     │  • Exclude: Source code archives                             │       │\n│     │  • Create matching release in core-releases                  │       │\n│     │  • Upload artifacts to public release                        │       │\n│     │  • Trigger kernel module build                               │       │\n│     └─────────────────────────────────────────────────────────────┘       │\n│                                                                            │\n│  3. KERNEL MODULE BUILD                                                    │\n│     ───────────────────                                                    │\n│          │                                                                 │\n│          │ triggered by sync-to-public                                     │\n│          ▼                                                                 │\n│     ┌─────────────────────────────────────────────────────────────┐       │\n│     │                sync-kernel-patches.yml                       │       │\n│     │                                                              │       │\n│     │  Build kernel modules for supported kernels:                 │       │\n│     │  ┌─────────────────────────────────────────────────────┐    │       │\n│     │  │  • mlos-ml-v{version}-linux-5.15.ko                 │    │       │\n│     │  │  • mlos-ml-v{version}-linux-6.1.ko                  │    │       │\n│     │  │  • mlos-ml-v{version}-linux-6.5.ko                  │    │       │\n│     │  │  • mlos-ml-v{version}-linux-6.8.ko                  │    │       │\n│     │  └─────────────────────────────────────────────────────┘    │       │\n│     │                                                              │       │\n│     │  Published to: mlos-linux-kernel releases                    │       │\n│     └─────────────────────────────────────────────────────────────┘       │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## E2E Testing Pipeline\n\nEvery release is validated against 32+ ML models in a unified testing pipeline:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                          E2E TESTING PIPELINE                              │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  SYSTEM-TEST REPO (Private)                                                │\n│  ─────────────────────────                                                 │\n│                                                                            │\n│     e2e-unified.yml                                                        │\n│     ┌──────────────────────────────────────────────────────────────┐      │\n│     │                                                              │      │\n│     │  ┌────────────────────────────────────────────────────────┐ │      │\n│     │  │ PHASE 1: USERSPACE TESTS                               │ │      │\n│     │  │                                                        │ │      │\n│     │  │  • Ensure kernel module NOT loaded                     │ │      │\n│     │  │  • Start Core (userspace mode)                         │ │      │\n│     │  │  • Test 32+ models via Axon                            │ │      │\n│     │  │  • Golden image validation                             │ │      │\n│     │  │  • Record inference times                              │ │      │\n│     │  └────────────────────────────────────────────────────────┘ │      │\n│     │                          │                                   │      │\n│     │                          ▼                                   │      │\n│     │  ┌────────────────────────────────────────────────────────┐ │      │\n│     │  │ CLEANUP                                                │ │      │\n│     │  │  • Drop kernel caches                                  │ │      │\n│     │  │  • Clear model caches                                  │ │      │\n│     │  │  • Ensure fair comparison                              │ │      │\n│     │  └────────────────────────────────────────────────────────┘ │      │\n│     │                          │                                   │      │\n│     │                          ▼                                   │      │\n│     │  ┌────────────────────────────────────────────────────────┐ │      │\n│     │  │ PHASE 2: KERNEL TESTS                                  │ │      │\n│     │  │                                                        │ │      │\n│     │  │  • Download kernel module from mlos-linux-kernel       │ │      │\n│     │  │  • Load module: insmod mlos-ml.ko                      │ │      │\n│     │  │  • Start Core (kernel mode)                            │ │      │\n│     │  │  • Test same 32+ models                                │ │      │\n│     │  │  • Compare with userspace results                      │ │      │\n│     │  └────────────────────────────────────────────────────────┘ │      │\n│     │                          │                                   │      │\n│     │                          ▼                                   │      │\n│     │  ┌────────────────────────────────────────────────────────┐ │      │\n│     │  │ GENERATE COMPARISON                                    │ │      │\n│     │  │                                                        │ │      │\n│     │  │  • Calculate kernel vs userspace speedup               │ │      │\n│     │  │  • Track historical metrics                            │ │      │\n│     │  │  • Upload metrics artifact                             │ │      │\n│     │  │  • Trigger render-report.yml                           │ │      │\n│     │  └────────────────────────────────────────────────────────┘ │      │\n│     └──────────────────────────────────────────────────────────────┘      │\n│                                                                            │\n│     render-report.yml                                                      │\n│     ┌──────────────────────────────────────────────────────────────┐      │\n│     │                                                              │      │\n│     │  • Download metrics from E2E run                             │      │\n│     │  • Render HTML report with Jinja2                            │      │\n│     │  • Include kernel comparison charts                          │      │\n│     │  • Deploy to GitHub Pages                                    │      │\n│     │                                                              │      │\n│     │  Output: https://mlos-foundation.github.io/system-test/      │      │\n│     └──────────────────────────────────────────────────────────────┘      │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n### Model Categories Tested\n\n| Category | Models | Validation |\n|----------|--------|------------|\n| NLP | BERT, RoBERTa, DistilBERT, ALBERT, etc. | Output shape, top-k class match |\n| Embeddings | BGE, E5, GTE, MiniLM | Embedding dimensions |\n| Vision | ResNet, ViT, ConvNeXt, RegNet, BEiT | Classification accuracy |\n| Sentiment | DistilRoBERTa, SqueezeBERT, BART | Sentiment scores |\n\n---\n\n## Website Publishing Pipeline\n\nContent flows from multiple sources to the website:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                        WEBSITE PUBLISHING PIPELINE                         │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  SOURCE REPOS                              WEBSITE                         │\n│  ────────────                              ───────                         │\n│                                                                            │\n│  ┌─────────────┐                                                           │\n│  │    core     │                                                           │\n│  │             │                                                           │\n│  │ docs/news/  │──┐                                                        │\n│  │ entries/    │  │                                                        │\n│  └─────────────┘  │  sync-news-to-website.yml                              │\n│                   │  ┌────────────────────────┐                            │\n│                   ├─▶│ repository_dispatch    │                            │\n│                   │  │ event: news-update     │──┐                         │\n│                   │  └────────────────────────┘  │                         │\n│                   │                              │                         │\n│  ┌─────────────┐  │                              │                         │\n│  │core-releases│  │                              │                         │\n│  │             │  │  sync-blogs-to-website.yml   │                         │\n│  │ docs/blogs/ │──┘  ┌────────────────────────┐  │                         │\n│  │ entries/    │────▶│ repository_dispatch    │──┤                         │\n│  └─────────────┘     │ event: blog-update     │  │                         │\n│                      └────────────────────────┘  │                         │\n│                                                  │                         │\n│  ┌─────────────┐     sync-release-to-website.yml │                         │\n│  │    core     │     ┌────────────────────────┐  │                         │\n│  │ on: release │────▶│ repository_dispatch    │──┤                         │\n│  │ [published] │     │ event: release-update  │  │                         │\n│  └─────────────┘     └────────────────────────┘  │                         │\n│                                                  │                         │\n│                                                  ▼                         │\n│                      ┌────────────────────────────────────────────┐       │\n│                      │           mlosfoundation.org                │       │\n│                      │                                            │       │\n│                      │  ┌──────────────────────────────────────┐  │       │\n│                      │  │ receive-news.yml                     │  │       │\n│                      │  │  • Aggregate news from all sources   │  │       │\n│                      │  │  • Update src/data/news/all-news.json│  │       │\n│                      │  │  • Commit and push to main           │  │       │\n│                      │  └──────────────────────────────────────┘  │       │\n│                      │                                            │       │\n│                      │  ┌──────────────────────────────────────┐  │       │\n│                      │  │ receive-blogs.yml                    │  │       │\n│                      │  │  • Fetch blogs from public repos     │  │       │\n│                      │  │  • Schedule: every 6 hours           │  │       │\n│                      │  │  • Update src/data/blogs/all-blogs   │  │       │\n│                      │  └──────────────────────────────────────┘  │       │\n│                      │                                            │       │\n│                      │  ┌──────────────────────────────────────┐  │       │\n│                      │  │ receive-release.yml                  │  │       │\n│                      │  │  • Update site-config.json           │  │       │\n│                      │  │  • Update version badges             │  │       │\n│                      │  │  • Update hero section               │  │       │\n│                      │  └──────────────────────────────────────┘  │       │\n│                      │                                            │       │\n│                      └────────────────────────────────────────────┘       │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Private vs Public Boundary\n\nThe key architectural decision is **what stays private and what becomes public**:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                         VISIBILITY BOUNDARY                                │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  PRIVATE (Source Code)                PUBLIC (Binaries & Reports)          │\n│  ─────────────────────                ───────────────────────────          │\n│                                                                            │\n│  ┌────────────────────┐              ┌────────────────────────────┐       │\n│  │ mlOS-foundation/   │              │ mlOS-foundation/           │       │\n│  │ core               │              │ core-releases              │       │\n│  │                    │              │                            │       │\n│  │ • C source code    │     ═══▶     │ • Pre-built binaries       │       │\n│  │ • Makefiles        │              │ • .deb packages            │       │\n│  │ • Kernel patches   │              │ • SHA256 checksums         │       │\n│  │ • Internal docs    │              │ • Release notes            │       │\n│  │ • News entries     │              │ • Blog posts               │       │\n│  └────────────────────┘              └────────────────────────────┘       │\n│                                                                            │\n│  ┌────────────────────┐              ┌────────────────────────────┐       │\n│  │ mlOS-foundation/   │              │ mlOS-foundation/           │       │\n│  │ axon               │              │ mlos-linux-kernel          │       │\n│  │                    │              │                            │       │\n│  │ • Go source code   │     ═══▶     │ • Compiled .ko modules     │       │\n│  │ • Converter logic  │              │ • Multi-kernel support     │       │\n│  │ • Model handlers   │              │ • Version-matched          │       │\n│  └────────────────────┘              └────────────────────────────┘       │\n│                                                                            │\n│  ┌────────────────────┐              ┌────────────────────────────┐       │\n│  │ mlOS-foundation/   │              │ GitHub Pages               │       │\n│  │ system-test        │              │ mlos-foundation.github.io/ │       │\n│  │                    │              │ system-test/               │       │\n│  │ • Test scripts     │     ═══▶     │                            │       │\n│  │ • Golden images    │              │ • E2E test reports         │       │\n│  │ • Report templates │              │ • Kernel comparison        │       │\n│  │ • Model configs    │              │ • Historical metrics       │       │\n│  └────────────────────┘              └────────────────────────────┘       │\n│                                                                            │\n│  ═══▶ = sync-to-public.yml / render-report.yml / sync-blogs.yml           │\n│                                                                            │\n│  WHAT STAYS PRIVATE:                 WHAT BECOMES PUBLIC:                  │\n│  • Source code                       • Compiled binaries                   │\n│  • Build scripts                     • Test results                        │\n│  • Internal docs                     • Performance metrics                 │\n│  • Proprietary algorithms            • Installation guides                 │\n│                                      • News & blog posts                   │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Secrets and Cross-Repo Authentication\n\nCross-repo automation requires careful secret management:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                            SECRET MANAGEMENT                               │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  REPO                  SECRET                     PURPOSE                  │\n│  ────                  ──────                     ───────                  │\n│                                                                            │\n│  core                  CORE_RELEASES_TOKEN        Push to core-releases    │\n│                        WEBSITE_DISPATCH_TOKEN     Trigger website updates  │\n│                        GPG_PRIVATE_KEY            Sign release artifacts   │\n│                        GPG_PASSPHRASE             GPG key passphrase       │\n│                                                                            │\n│  core-releases         (none required)            Public repo, no secrets  │\n│                                                                            │\n│  system-test           GITHUB_TOKEN               Download from releases   │\n│                                                   (built-in, read-only)    │\n│                                                                            │\n│  mlosfoundation.org    GITHUB_TOKEN               Auto-commit updates      │\n│                                                   (built-in, write perms)  │\n│                                                                            │\n│  ┌──────────────────────────────────────────────────────────────────────┐ │\n│  │ FALLBACK STRATEGY                                                    │ │\n│  │                                                                      │ │\n│  │ If WEBSITE_DISPATCH_TOKEN is not set:                                │ │\n│  │   • Workflows complete but skip cross-repo triggers                  │ │\n│  │   • Website polls public repos on schedule (every 6 hours)           │ │\n│  │   • No manual intervention required                                  │ │\n│  │                                                                      │ │\n│  │ Benefits:                                                            │ │\n│  │   • System works even without PAT configuration                      │ │\n│  │   • Graceful degradation, not failure                                │ │\n│  └──────────────────────────────────────────────────────────────────────┘ │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Complete Flow: From Commit to Live\n\nHere's what happens when we release a new version:\n\n```\n┌────────────────────────────────────────────────────────────────────────────┐\n│                     COMPLETE RELEASE TIMELINE                              │\n├────────────────────────────────────────────────────────────────────────────┤\n│                                                                            │\n│  T+0m    Developer creates release v7.0.0 in core                          │\n│          │                                                                 │\n│          ├──▶ publish-artifacts.yml triggered                              │\n│          │                                                                 │\n│  T+5m    │    Build matrix completes (4 platforms)                         │\n│          │    • linux-amd64, linux-arm64                                   │\n│          │    • darwin-amd64, darwin-arm64                                 │\n│          │                                                                 │\n│  T+8m    │    .deb package built                                           │\n│          │                                                                 │\n│  T+10m   │    Artifacts uploaded, release published                        │\n│          │                                                                 │\n│          ├──▶ sync-to-public.yml triggered (on: release published)         │\n│          │                                                                 │\n│  T+12m   │    Binaries synced to core-releases                             │\n│          │                                                                 │\n│          ├──▶ sync-kernel-patches.yml triggered                            │\n│          │                                                                 │\n│  T+20m   │    Kernel modules built for 4 kernel versions                   │\n│          │    Published to mlos-linux-kernel                               │\n│          │                                                                 │\n│          ├──▶ sync-release-to-website.yml triggered                        │\n│          │                                                                 │\n│  T+22m   │    Website updated with new version                             │\n│          │    • site-config.json updated                                   │\n│          │    • Hero badge: \"STABLE RELEASE - v7.0.0\"                      │\n│          │                                                                 │\n│          ├──▶ E2E tests manually triggered (or weekly schedule)            │\n│          │                                                                 │\n│  T+45m   │    e2e-unified.yml completes                                    │\n│          │    • Userspace: 32 models tested                                │\n│          │    • Kernel: 32 models tested                                   │\n│          │    • Comparison metrics generated                               │\n│          │                                                                 │\n│          ├──▶ render-report.yml triggered                                  │\n│          │                                                                 │\n│  T+48m   │    Test report published to GitHub Pages                        │\n│          │    https://mlos-foundation.github.io/system-test/               │\n│          │                                                                 │\n│  T+54m   │    Blog sync runs (scheduled or triggered)                      │\n│          │    New blog posts appear on mlosfoundation.org                  │\n│          │                                                                 │\n│  ═════   DONE - All systems updated automatically                          │\n│                                                                            │\n│  TOTAL TIME: ~1 hour from commit to fully deployed                         │\n│                                                                            │\n└────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Key Design Decisions\n\n### 1. Event-Driven Architecture\n\nEverything triggers from a single event: `on: release [published]`. This ensures:\n- Artifacts are fully uploaded before sync begins\n- No partial releases reach public repos\n- Clear audit trail in GitHub Actions\n\n### 2. Graceful Degradation\n\nIf secrets aren't configured, workflows don't fail—they skip the cross-repo steps and continue. The website falls back to scheduled polling.\n\n### 3. Version Matching\n\nKernel modules are tagged with Core version (e.g., `mlos-ml-v7.0.0-linux-6.8.ko`). The E2E pipeline downloads the exact matching version.\n\n### 4. Golden Image Validation\n\nEvery model has expected outputs stored in `golden-test-data.yaml`. Tests validate:\n- Status success\n- Output shape matches\n- Top-k class predictions match\n\n### 5. Historical Tracking\n\nThe `historical-metrics.py` script maintains run history across E2E executions, enabling trend analysis and regression detection.\n\n---\n\n## Monitoring and Debugging\n\n### Workflow Status Dashboard\n\n| Repository | Workflow | Purpose | Schedule |\n|------------|----------|---------|----------|\n| core | publish-artifacts.yml | Build binaries | On release |\n| core | sync-to-public.yml | Sync to core-releases | On release |\n| core | sync-kernel-patches.yml | Build kernel modules | On release |\n| core | sync-news-to-website.yml | Sync news | On push to docs/news |\n| core-releases | sync-blogs-to-website.yml | Sync blogs | On push to docs/blogs |\n| system-test | e2e-unified.yml | Run E2E tests | Weekly + manual |\n| system-test | render-report.yml | Publish reports | After E2E |\n| mlosfoundation.org | receive-blogs.yml | Fetch blogs | Every 6 hours |\n\n### Common Issues and Fixes\n\n| Issue | Cause | Fix |\n|-------|-------|-----|\n| Sync skipped | WEBSITE_DISPATCH_TOKEN not set | Add PAT to secrets |\n| Kernel load fails | Module vermagic mismatch | Rebuild for runner kernel |\n| E2E fails | Golden data missing | Add model to golden-test-data.yaml |\n| Report empty | No metrics artifact | Check E2E run completed |\n\n---\n\n## Conclusion\n\nThis automation architecture enables MLOS to:\n\n1. **Release confidently** - Binaries are built, tested, and published automatically\n2. **Protect IP** - Source code stays private while binaries are public\n3. **Validate thoroughly** - Every release is tested against 32+ models\n4. **Communicate effectively** - Website, news, and blogs stay in sync\n5. **Scale safely** - Adding new models or platforms is straightforward\n\nThe entire system runs on GitHub Actions with no external CI/CD infrastructure, keeping operational complexity minimal while enabling a sophisticated multi-repo workflow.\n\n---\n\n*For more details, explore the workflow files in each repository:*\n- [core/.github/workflows/](https://github.com/mlOS-foundation/core/tree/main/.github/workflows)\n- [system-test/.github/workflows/](https://github.com/mlOS-foundation/system-test/tree/main/.github/workflows)\n- [mlosfoundation.org/.github/workflows/](https://github.com/mlOS-foundation/mlosfoundation.org/tree/main/.github/workflows)",
      "key_highlights": [
        {
          "title": "6 Repos Orchestrated",
          "description": "Private and public repos working together seamlessly",
          "icon": "git-branch"
        },
        {
          "title": "32+ Models Tested",
          "description": "Every release validated against comprehensive model suite",
          "icon": "check-circle"
        },
        {
          "title": "< 1 Hour",
          "description": "From commit to fully deployed across all systems",
          "icon": "clock"
        },
        {
          "title": "Zero Manual Steps",
          "description": "Fully automated from release to website update",
          "icon": "zap"
        }
      ],
      "links": [
        {
          "text": "Read Full Post",
          "url": "https://mlosfoundation.org/blog.html?id=mlos-automation-architecture",
          "primary": true
        },
        {
          "text": "E2E Test Reports",
          "url": "https://mlos-foundation.github.io/system-test/",
          "primary": false
        },
        {
          "text": "Core Releases",
          "url": "https://github.com/mlOS-foundation/core-releases/releases",
          "primary": false
        }
      ],
      "tags": [
        "automation",
        "ci-cd",
        "github-actions",
        "architecture",
        "devops",
        "release-management",
        "testing"
      ],
      "related_releases": [
        "v7.0.0",
        "v7.0.0-beta",
        "v6.3.0-alpha"
      ],
      "source_repo": "mlOS-foundation/core-releases"
    },
    {
      "id": "kernel-performance-evolution-v7",
      "title": "MLOS Core Kernel Performance Evolution: A Deep Dive into v6.3.0 to v7.0.0",
      "date": "2026-01-04",
      "author": {
        "name": "MLOS Core Team",
        "github": "mlOS-foundation",
        "role": "Core Development Team"
      },
      "category": "release-analysis",
      "featured": true,
      "badge": "DEEP DIVE",
      "summary": "A comprehensive analysis of MLOS Core's performance journey from v6.3.0-alpha through v7.0.0-beta to the stable v7.0.0 release. This post examines the kernel-level optimizations that achieved up to 40% memory reduction and 4x throughput improvements.",
      "reading_time": "12 min read",
      "content": "# MLOS Core Kernel Performance Evolution: v6.3.0 to v7.0.0\n\n## Executive Summary\n\nOver the past month, the MLOS Core kernel has undergone a significant transformation. Starting from v6.3.0-alpha's foundational improvements, through v7.0.0-beta's runtime optimizations, to the stable v7.0.0 release's memory management breakthroughs—we've achieved remarkable performance gains across the board.\n\n**Key Achievements:**\n- **25-40% memory reduction** through tensor fusion and deduplication\n- **4× reduction** in lock contention for batch inference\n- **3.6M ops/sec** tensor pool throughput\n- **<50μs** per-inference overhead (down from ~200μs)\n- **32 models** validated with comprehensive golden test data\n\n---\n\n## Release Timeline\n\n| Version | Date | Type | Focus Area |\n|---------|------|------|------------|\n| v6.3.0-alpha | Dec 31, 2025 | Alpha | Foundation & ONNX Optimization |\n| v7.0.0-beta | Jan 2, 2026 | Beta | Runtime Performance |\n| v7.0.0 | Jan 3, 2026 | Stable | Memory Optimization |\n\n---\n\n## Phase 1: Foundation (v6.3.0-alpha)\n\n### What We Started With\n\nThe v6.3.0-alpha release established the baseline for our optimization journey:\n\n- **ONNX CPU Optimizations**: Initial CPU execution path improvements\n- **Input Auto-generation**: Automatic BERT input tensor generation\n- **E2E Validation**: 32/32 models passing end-to-end tests\n- **Binary Distribution**: Cross-platform builds (Linux, macOS Intel/ARM)\n\n### Baseline Performance Metrics\n\n```\nPer-inference overhead: ~200μs\nLock acquisitions (batch=4): 4 locks\nMemory allocation: Standard malloc/free\nNUMA awareness: None\n```\n\nThis release gave us a stable foundation but highlighted several optimization opportunities in the scheduler and memory subsystems.\n\n---\n\n## Phase 2: Runtime Performance (v7.0.0-beta)\n\n### Tensor Pool Pre-allocation\n\nThe biggest runtime improvement came from eliminating per-inference allocation overhead:\n\n**Before (v6.3.0-alpha):**\n```c\n// Each inference: malloc → compute → free\nvoid* tensor = malloc(size);  // ~50-200μs\ncompute(tensor);\nfree(tensor);                 // ~10-50μs\n```\n\n**After (v7.0.0-beta):**\n```c\n// O(1) pool operations\nmlos_tensor_t* tensor = mlos_tensor_pool_acquire(pool);  // <1μs\ncompute(tensor);\nmlos_tensor_pool_release(pool, tensor);                   // <1μs\n```\n\n**Results:**\n- Throughput: **3.6 million ops/sec**\n- Overhead: Reduced from ~200μs to **<50μs** (4× improvement)\n- Lock-free fast path for common operations\n\n### Batch Inference Scheduling\n\nFor multi-task inference, we introduced batch submission:\n\n**Before:**\n```\nTask 1: acquire_lock → submit → release_lock\nTask 2: acquire_lock → submit → release_lock\nTask 3: acquire_lock → submit → release_lock\nTask 4: acquire_lock → submit → release_lock\n= 4 lock acquisitions\n```\n\n**After:**\n```\nBatch: acquire_lock → submit_all(4) → release_lock\n= 1 lock acquisition\n```\n\nThis provides **N× reduction** in lock contention for batch size N.\n\n### NUMA Thread Affinity\n\nFor multi-socket systems, we added automatic NUMA awareness:\n\n```c\nmlos_tensor_alloc_numa(size, numa_node);\nmlos_set_thread_affinity(node);\n```\n\nThis ensures inference threads run on the same NUMA node as their tensor memory, reducing cross-socket memory access latency.\n\n---\n\n## Phase 3: Memory Optimization (v7.0.0)\n\n### Tensor Fusion Detection\n\nThe stable release introduced intelligent memory reuse based on tensor lifetime analysis:\n\n**Problem:** Many tensors have non-overlapping lifetimes but are allocated separately.\n\n**Solution:** Analyze computation graph to identify tensors that can share memory:\n\n```c\nmlos_fusion_ctx_t* ctx = mlos_fusion_analyze(model);\nmlos_fusion_execute(ctx);  // Apply memory sharing\nmlos_fusion_stats_t stats = mlos_fusion_get_stats(ctx);\n// stats.memory_saved: 15-25%\n```\n\n**Results:**\n- Memory reduction: **15-25%**\n- Zero runtime overhead (analysis done at load time)\n- Automatic fallback for incompatible tensors\n\n### Cross-Model Tensor Deduplication\n\nFor multi-model deployments, we detect duplicate tensors across models:\n\n**How it works:**\n1. Compute SHA-256 hash of tensor contents\n2. Store in content-addressable cache\n3. Return existing tensor if hash matches\n4. Copy-on-write semantics for thread safety\n\n```c\nmlos_dedup_enable(global_context);\nmlos_dedup_hash_tensor(tensor);  // SHA-256 fingerprint\nmlos_dedup_analyze_models(models, count);\nmlos_dedup_stats_t stats = mlos_dedup_get_stats();\n// stats.duplicates_found, stats.memory_saved\n```\n\n**Results:**\n- Additional memory savings: **10-20%**\n- Most effective with embedding models sharing vocabulary\n- Transparent to inference code\n\n### Combined Impact\n\nWhen both optimizations are enabled:\n\n| Scenario | Fusion Only | Dedup Only | Combined |\n|----------|-------------|------------|----------|\n| Single model | 15-25% | 0% | 15-25% |\n| 2 similar models | 15-25% | 10-15% | 25-35% |\n| 4+ embedding models | 15-25% | 15-20% | 30-40% |\n\n---\n\n## Performance Comparison Summary\n\n### Latency Improvements\n\n| Metric | v6.3.0-alpha | v7.0.0-beta | v7.0.0 |\n|--------|--------------|-------------|--------|\n| Per-inference overhead | ~200μs | <50μs | <50μs |\n| Tensor acquire/release | N/A | O(1) | O(1) |\n| Lock acquisitions (batch=4) | 4 | 1 | 1 |\n| p99 latency (small models) | 2.5ms | 1.2ms | 0.8ms |\n\n### Throughput Improvements\n\n| Metric | v6.3.0-alpha | v7.0.0-beta | v7.0.0 |\n|--------|--------------|-------------|--------|\n| Tensor pool ops/sec | N/A | 3.6M | 3.6M |\n| Small model speedup | baseline | +10% | +10% |\n| Large model speedup | baseline | +40% | +40% |\n\n### Memory Improvements\n\n| Metric | v6.3.0-alpha | v7.0.0-beta | v7.0.0 |\n|--------|--------------|-------------|--------|\n| Tensor fusion savings | 0% | 0% | 15-25% |\n| Deduplication savings | 0% | 0% | 10-20% |\n| Combined savings | 0% | 0% | 25-40% |\n\n---\n\n## Test Coverage Evolution\n\n| Version | Kernel Tests | E2E Models | Golden Data |\n|---------|--------------|------------|-------------|\n| v6.3.0-alpha | 8 | 32 | 18 |\n| v7.0.0-beta | 12 | 32 | 18 |\n| v7.0.0 | 18 | 32 | 32 |\n\n**New tests in v7.0.0:**\n- Tensor fusion lifecycle and statistics\n- Cross-model deduplication with SHA-256\n- Memory pressure scenarios\n- Multi-model deployment simulation\n\n---\n\n## API Evolution\n\n### New APIs in v7.0.0-beta\n\n```c\n// Tensor Pool\nmlos_tensor_pool_create()\nmlos_tensor_pool_destroy()\nmlos_tensor_pool_acquire()\nmlos_tensor_pool_release()\nmlos_tensor_pool_get_stats()\nmlos_tensor_pool_prewarm()\n\n// NUMA\nmlos_tensor_alloc_numa()\n\n// Batch Scheduling\nmlos_sched_submit_batch()\n```\n\n### New APIs in v7.0.0\n\n```c\n// Tensor Fusion\nmlos_fusion_analyze()\nmlos_fusion_execute()\nmlos_fusion_get_stats()\n\n// Deduplication\nmlos_dedup_hash_tensor()\nmlos_dedup_enable()\nmlos_dedup_analyze_models()\nmlos_dedup_get_stats()\n```\n\n---\n\n## Recommendations\n\n### For Single-Model Deployments\n\n1. **Enable tensor fusion** at model load time\n2. **Use tensor pools** for high-throughput inference\n3. **Set NUMA affinity** on multi-socket systems\n\n### For Multi-Model Deployments\n\n1. **Enable both fusion and deduplication**\n2. **Group similar models** for better dedup hit rates\n3. **Monitor memory savings** via stats APIs\n\n### For Batch Inference\n\n1. **Use `mlos_sched_submit_batch()`** for multi-task submissions\n2. **Tune batch sizes** based on workload\n3. **Pre-warm tensor pools** before high-load periods\n\n---\n\n## What's Next\n\nThe v7.0.0 release establishes a strong foundation for future optimizations:\n\n- **GPU memory pooling** (planned for v7.1.0)\n- **Dynamic tensor fusion** for runtime graph changes\n- **Distributed deduplication** across nodes\n- **Profile-guided optimization** based on runtime metrics\n\n---\n\n## Conclusion\n\nThe journey from v6.3.0-alpha to v7.0.0 represents a significant advancement in MLOS Core's performance capabilities. Through careful optimization of the runtime scheduler and innovative memory management techniques, we've achieved:\n\n- **4× reduction** in per-inference overhead\n- **Up to 40%** memory savings for multi-model deployments\n- **Comprehensive test coverage** across 32 validated models\n\nThese improvements make MLOS Core an even more compelling choice for production ML deployments where performance and resource efficiency are critical.\n\n---\n\n*For detailed technical documentation, see:*\n- [Kernel Performance Analysis](https://github.com/mlOS-foundation/core/blob/main/docs/KERNEL_PERFORMANCE_ANALYSIS.md)\n- [Performance Execution Plan](https://github.com/mlOS-foundation/core/blob/main/docs/KERNEL_PERFORMANCE_EXECUTION_PLAN.md)\n- [Changelog](https://github.com/mlOS-foundation/core/blob/main/CHANGELOG.md)",
      "performance_data": {
        "releases_compared": [
          {
            "version": "v6.3.0-alpha",
            "date": "2025-12-31",
            "name": "Binary Distribution Release",
            "type": "alpha"
          },
          {
            "version": "v7.0.0-beta",
            "date": "2026-01-02",
            "name": "First Beta Release",
            "type": "beta"
          },
          {
            "version": "v7.0.0",
            "date": "2026-01-03",
            "name": "Kernel Optimization Release",
            "type": "stable"
          }
        ],
        "metrics": [
          {
            "name": "Per-inference overhead",
            "unit": "μs",
            "values": {
              "v6.3.0-alpha": "~200",
              "v7.0.0-beta": "<50",
              "v7.0.0": "<50"
            },
            "improvement": "4× reduction"
          },
          {
            "name": "Tensor pool throughput",
            "unit": "ops/sec",
            "values": {
              "v6.3.0-alpha": "N/A",
              "v7.0.0-beta": "3.6M",
              "v7.0.0": "3.6M"
            },
            "improvement": "New capability"
          },
          {
            "name": "Lock acquisitions (batch=4)",
            "unit": "locks",
            "values": {
              "v6.3.0-alpha": 4,
              "v7.0.0-beta": 1,
              "v7.0.0": 1
            },
            "improvement": "4× reduction"
          },
          {
            "name": "Tensor fusion savings",
            "unit": "%",
            "values": {
              "v6.3.0-alpha": 0,
              "v7.0.0-beta": 0,
              "v7.0.0": "15-25"
            },
            "improvement": "15-25% memory reduction"
          },
          {
            "name": "Deduplication savings",
            "unit": "%",
            "values": {
              "v6.3.0-alpha": 0,
              "v7.0.0-beta": 0,
              "v7.0.0": "10-20"
            },
            "improvement": "10-20% memory reduction"
          },
          {
            "name": "Combined memory savings",
            "unit": "%",
            "values": {
              "v6.3.0-alpha": 0,
              "v7.0.0-beta": 0,
              "v7.0.0": "25-40"
            },
            "improvement": "25-40% memory reduction"
          },
          {
            "name": "Kernel tests",
            "unit": "tests",
            "values": {
              "v6.3.0-alpha": 8,
              "v7.0.0-beta": 12,
              "v7.0.0": 18
            },
            "improvement": "125% increase"
          },
          {
            "name": "Models with golden data",
            "unit": "models",
            "values": {
              "v6.3.0-alpha": 18,
              "v7.0.0-beta": 18,
              "v7.0.0": 32
            },
            "improvement": "78% increase"
          }
        ]
      },
      "key_highlights": [
        {
          "title": "4× Faster Inference Overhead",
          "description": "Per-inference overhead reduced from ~200μs to <50μs through tensor pool pre-allocation",
          "icon": "zap"
        },
        {
          "title": "25-40% Memory Reduction",
          "description": "Combined tensor fusion and cross-model deduplication for significant memory savings",
          "icon": "memory"
        },
        {
          "title": "3.6M ops/sec Throughput",
          "description": "Lock-free tensor pool operations enable massive throughput for high-frequency inference",
          "icon": "trending-up"
        },
        {
          "title": "32 Validated Models",
          "description": "Comprehensive golden test data coverage across NLP, embedding, and vision models",
          "icon": "check-circle"
        }
      ],
      "links": [
        {
          "text": "Read Full Post",
          "url": "https://mlosfoundation.org/blog.html?id=kernel-performance-evolution-v7",
          "primary": true
        },
        {
          "text": "v7.0.0 Release",
          "url": "https://github.com/mlOS-foundation/core/releases/tag/v7.0.0",
          "primary": false
        },
        {
          "text": "Performance Analysis Docs",
          "url": "https://github.com/mlOS-foundation/core/blob/main/docs/KERNEL_PERFORMANCE_ANALYSIS.md",
          "primary": false
        },
        {
          "text": "Changelog",
          "url": "https://github.com/mlOS-foundation/core/blob/main/CHANGELOG.md",
          "primary": false
        },
        {
          "text": "E2E Test Reports",
          "url": "https://mlos-foundation.github.io/system-test/",
          "primary": false
        }
      ],
      "tags": [
        "performance",
        "kernel",
        "memory-optimization",
        "tensor-fusion",
        "deduplication",
        "benchmarks",
        "release-analysis"
      ],
      "related_releases": [
        "v6.3.0-alpha",
        "v7.0.0-beta",
        "v7.0.0"
      ],
      "source_repo": "mlOS-foundation/core-releases"
    }
  ]
}